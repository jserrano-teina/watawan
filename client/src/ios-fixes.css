/* 
  iOS-FIXES CSS
  Este archivo contiene soluciones específicas para problemas SÓLO en iOS 
  Actúa como una segunda capa sobre pwa-fixes.css
*/

/* Selector específico para Safari en iOS en modo standalone */
@supports (-webkit-touch-callout: none) {
  @media (display-mode: standalone), (display-mode: fullscreen) {
    /* ===== CORRECCIONES CRÍTICAS PARA LAYOUT DE iOS ===== */
    
    /* Viewport y root fijos para evitar scroll indeseado */
    html, body {
      position: fixed !important;
      width: 100% !important;
      height: 100% !important;
      overflow: hidden !important;
      -webkit-text-size-adjust: 100% !important;
      background-color: #121212 !important;
    }
    
    /* Root container con overflow controlado */
    #root {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      overflow-y: auto !important;
      overflow-x: hidden !important;
      -webkit-overflow-scrolling: touch !important;
      overscroll-behavior-y: none !important;
      padding-top: env(safe-area-inset-top, 0) !important;
      padding-bottom: calc(72px + env(safe-area-inset-bottom, 0)) !important;
    }
    
    /* ===== CORRECCIÓN PARA NAVBAR ===== */
    /* Asegurar que la navegación inferior esté fija y con color sólido */
    .fixed-navigation {
      position: fixed !important;
      bottom: 0 !important;
      left: 0 !important;
      right: 0 !important;
      z-index: 9999 !important;
      height: 72px !important;
      padding-bottom: env(safe-area-inset-bottom, 0) !important;
      background-color: #121212 !important; /* Color sólido, no transparente */
      border-top: 1px solid #333 !important;
      transform: none !important; /* Prevenir transforms que puedan ocultarla */
      opacity: 1 !important;
      visibility: visible !important;
    }
    
    /* ===== CORRECCIONES PARA MODALES Y SHEETS ===== */
    /* Forzar que los Sheets lleguen hasta arriba pero respeten safe areas */
    [data-radix-popper-content-wrapper] {
      position: fixed !important;
      inset: 0 !important;
      height: 100% !important;
      width: 100% !important;
      max-height: 100% !important;
      z-index: 9999 !important;
      overflow: hidden !important;
    }
    
    /* Para el bottom sheet específicamente */
    [data-state="open"][data-side="bottom"] {
      border-top-left-radius: 16px !important;
      border-top-right-radius: 16px !important;
      top: auto !important; /* No forzar desde arriba */
      padding-top: 16px !important;
      padding-bottom: calc(16px + env(safe-area-inset-bottom, 0)) !important;
      background-color: #121212 !important;
    }
    
    /* Modal content asegurando que hay espacio para safe areas */
    .modal-content {
      padding-top: env(safe-area-inset-top, 0) !important;
      padding-bottom: env(safe-area-inset-bottom, 0) !important;
    }
    
    /* ===== FIX PARA ÁREA FANTASMA BAJO LA NAVBAR ===== */
    /* Asegurar que no haya espacio extra bajo la navbar */
    .fixed-navigation::after {
      content: "" !important;
      position: fixed !important;
      left: 0 !important; 
      right: 0 !important;
      bottom: 0 !important;
      height: env(safe-area-inset-bottom, 0) !important;
      background-color: #121212 !important; /* Mismo color que navbar */
      z-index: 9998 !important; /* Justo debajo de la navbar */
    }
    
    /* ===== MEJORAR INTERACTIVIDAD ===== */
    button, a, input, textarea, [role="button"] {
      cursor: pointer !important;
      touch-action: manipulation !important;
      -webkit-tap-highlight-color: transparent !important;
    }
    
    input, textarea {
      -webkit-user-select: text !important;
      user-select: text !important;
    }
  }
}